Working on creating an environmental structure for Packer.

This is to be able to create a Truenas VM Template on pve1
So I can then test the Terraform VM Creation
So I can then test the ansible truenas configuration role from Jules

# UPDATE 8/20 - Starting to debug Packer for creating Truenas

# 08/21 - 
Restructured all Ansible Varible loading in Prod, need to do for other environment.  Gruops & Host get a folder, main.yml has values, vault.yml has secrets.  
Got ensure-iso running correctly, which will download all required ISOs on the PVE host
Only downloads once, Packer build test next.

# 09/05
Tested out the packar command, after fixing the homelab role creation, (Needed VM.Console) permission, the script seems to be working. 

Next Step: Do a full code review for Truenas VM Creation, understand, commit
Then : I think I need to test the Terraform+Ansible portion / role that will create a VM Instance of Truenas, and then configure it accordingly.

# 09/06

Working on TF VM Creation.  Had to generate a new GH token (token removed for security).

Got Truenas VM Created. The agent changed the way that the Cloud Init was working, from file to raw or something like that.  I had the agent make cloud init optional because truenas doesn't need it.  Truenas works, need to test ansible next.

TODO: Will need to test other VM creations that need cloud init, like the management VM

TODO: I should ask CoPilot how to best chain the TF+Ansible.  Is that via makefile? Something else? do it in two commands?

**************** TODO ****************************
TODO: Enhancements - automate ISO downloads when new things arrive.  Need to write script to scrape sites and add to variables



****************** COMPLETED TASKS ***************

DONE: Other issues now to deal with: PVE1 is not working, core ZFS array broke, need to rebuild from scratch, and now Proxmox 9 is out.  Can try an upgrade first, fix zfs, then try a rebuild to 0.
RESOLUTION: Need to change CMOS battery - BIOS didn't stick.  CPU3 for Bifurcation


DONE: Pihole LXC not starting, so local DNS is fucked 
RESOLUTION: No Storage